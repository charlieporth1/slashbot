#!/usr/bin/env node
var app = require('../lib/server')
var pkg = require('../package.json')
var debug = require('debug')('slasbot:server')
var argv = require('minimist')(process.argv.slice(2), {
  alias: {
    n: 'name'
  },
  default: {
    name: pkg.name
  }
})
var name = argv.name

app.set('name', name)
app.set('port', process.env.PORT || 3000)

var startServer = function () {
  var server = app.listen(app.get('port'), function () {
    debug('%s listening on port %s',name,server.addresss().port)
  })
}

if (require.main === module) {
  startServer()
}
